{"version":3,"sources":["../../server/test/repaymentTest.js"],"names":["chai","require","chaiHttp","expect","app","should","use","fakeRepaymentData","amount","correctRepaymentData","describe","it","done","request","post","send","end","err","res","have","status","console","log","body","get","to","equal","JSON","parse","data","length"],"mappings":"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","sourcesContent":["/* eslint-disable linebreak-style */\r\nconst chai = require('chai');\r\nconst chaiHttp = require('chai-http');\r\nconst { expect } = require('chai');\r\nconst app = require('../config/index');\r\n\r\nconst should = chai.should();\r\nchai.use(chaiHttp);\r\nconst fakeRepaymentData = {\r\n  amount: 'jjjjj',\r\n};\r\nconst correctRepaymentData = {\r\n  amount: '210',\r\n};\r\ndescribe('Post a repayment transaction', () => {\r\n  it('it should return a 400 status when amount is  not a number', (done) => {\r\n    chai.request(app.app)\r\n      .post('/v1/loans/0/repayment')\r\n      .send(fakeRepaymentData)\r\n      .end((err, res) => {\r\n        res.should.have.status(400);\r\n        console.log(res.body);\r\n        done();\r\n      });\r\n  });\r\n  it('it should return a 400 status when amount is  undefined', (done) => {\r\n    chai.request(app.app)\r\n      .post('/v1/loans/0/repayment')\r\n      .send('')\r\n      .end((err, res) => {\r\n        res.should.have.status(400);\r\n        console.log(res.body);\r\n        done();\r\n      });\r\n  });\r\n  it('it should return a 400 status when the loan is not found', (done) => {\r\n    chai.request(app.app)\r\n      .post('/v1/loans/650/repayment')\r\n      .send(correctRepaymentData)\r\n      .end((err, res) => {\r\n        res.should.have.status(400);\r\n        console.log(res.body);\r\n        done();\r\n      });\r\n  });\r\n  it('it should return a 200 status when everything is okey', (done) => {\r\n    chai.request(app.app)\r\n      .post('/v1/loans/0/repayment')\r\n      .send(correctRepaymentData)\r\n      .end((err, res) => {\r\n        res.should.have.status(200);\r\n        console.log(res.body);\r\n        done();\r\n      });\r\n  });\r\n  it('it should return a 401 status loan is already repaid', (done) => {\r\n    chai.request(app.app)\r\n      .post('/v1/loans/1/repayment')\r\n      .send(correctRepaymentData)\r\n      .end((err, res) => {\r\n        res.should.have.status(401);\r\n        console.log(res.body);\r\n        done();\r\n      });\r\n  });\r\n});\r\n\r\ndescribe('Post a repayment transaction', () => {\r\n  it('it should return a 200 and a list containing one repayment', (done) => {\r\n    chai.request(app.app)\r\n      .get('/v1/loans/0/repayment')\r\n      .send('')\r\n      .end((err, res) => {\r\n        res.should.have.status(200);\r\n        expect(2).to.equal(JSON.parse(res.body.data).length);\r\n        console.log(res.body);\r\n        done();\r\n      });\r\n  });\r\n});\r\n"],"file":"repaymentTest.js"}
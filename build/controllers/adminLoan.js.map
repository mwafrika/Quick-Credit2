{"version":3,"sources":["../../server/controllers/adminLoan.js"],"names":["getloans","req","res","query","status","repaid","send","data","getSpecificLoan","loanID","params","loan","error","approveLoan","body"],"mappings":"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","sourcesContent":["/* eslint-disable linebreak-style */\r\n\r\nimport {\r\n  getCurrentLoans,\r\n  getRepaidLoans,\r\n  getAllLoans,\r\n  getSingleLoan,\r\n  updateLoan,\r\n} from '../helper/loansHelper';\r\n\r\nexport const getloans = (req, res) => {\r\n  if (req.query.status === 'approved' && req.query.repaid === 'false') {\r\n    res.status(200).send({\r\n      status: 200,\r\n      data: getCurrentLoans(),\r\n    });\r\n  } else if (req.query.status === 'approved' && req.query.repaid === 'true') {\r\n    res.status(200).send({\r\n      status: 200,\r\n      data: getRepaidLoans(),\r\n    });\r\n  } else {\r\n    res.status(200).send({\r\n      status: 200,\r\n      data: getAllLoans(),\r\n    });\r\n  }\r\n};\r\n\r\nexport const getSpecificLoan = (req, res) => {\r\n  const { loanID } = req.params;\r\n  if (loanID) {\r\n    const loan = getSingleLoan(loanID);\r\n    if (loan) {\r\n      res.status(200).send({\r\n        status: 200,\r\n        data: loan,\r\n      });\r\n    } else {\r\n      res.status(400).send({\r\n        status: 400,\r\n        error: 'We can\\'t find a loan with such ID',\r\n      });\r\n    }\r\n  } else {\r\n    res.status(400).send({\r\n      status: 400,\r\n      error: 'Bad request, please provide the loan ID = ',\r\n    });\r\n  }\r\n};\r\n\r\nexport const approveLoan = (req, res) => {\r\n  const loan = getSingleLoan(req.params.loanID);\r\n  if (loan) {\r\n    if (loan.status === 'approved') {\r\n      res.status(401).send({\r\n        status: 401,\r\n        error: 'you are not authorised to modify the status of this loan',\r\n      });\r\n    } else if (req.body.status === 'approved') {\r\n      loan.status = 'approved';\r\n      res.status(200).send({\r\n        status: 200,\r\n        data: updateLoan(loan),\r\n      });\r\n    } else if (req.body.status === 'rejected') {\r\n      loan.status = 'rejected';\r\n      res.status(200).send({\r\n        status: 200,\r\n        data: updateLoan(loan),\r\n      });\r\n    } else {\r\n      res.status(400).send({\r\n        status: 400,\r\n        error: 'Bad request, the new status is not correct ',\r\n      });\r\n    }\r\n  } else {\r\n    res.status(400).send({\r\n      status: 400,\r\n      error: 'Bad request, this loan does not exist ',\r\n    });\r\n  }\r\n};\r\n"],"file":"adminLoan.js"}
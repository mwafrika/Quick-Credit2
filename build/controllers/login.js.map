{"version":3,"sources":["../../server/controllers/login.js"],"names":["loanHelper","require","replacerJson","login","req","res","body","email","status","send","success","message","password","user","getSingleUser","console","log","validatePassword","data","JSON","stringify"],"mappings":";;;;;;;AAGA;;AAHA;AACA,IAAMA,UAAU,GAAGC,OAAO,CAAC,sBAAD,CAA1B;;AACA,IAAMC,YAAY,GAAGD,OAAO,CAAC,qBAAD,CAA5B;;AAGO,SAASE,KAAT,CAAeC,GAAf,EAAoBC,GAApB,EAAyB;AAC9B,MAAI,CAACD,GAAG,CAACE,IAAJ,CAASC,KAAd,EAAqB;AACnBF,IAAAA,GAAG,CAACG,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBC,MAAAA,OAAO,EAAE,OADU;AAEnBC,MAAAA,OAAO,EAAE;AAFU,KAArB;AAID,GALD,MAKO,IAAI,CAACP,GAAG,CAACE,IAAJ,CAASM,QAAd,EAAwB;AAC7BP,IAAAA,GAAG,CAACG,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBC,MAAAA,OAAO,EAAE,OADU;AAEnBC,MAAAA,OAAO,EAAE;AAFU,KAArB;AAID,GALM,MAKA;AACL,QAAME,IAAI,GAAGb,UAAU,CAACc,aAAX,CAAyBV,GAAG,CAACE,IAAJ,CAASC,KAAlC,CAAb;;AACA,QAAIM,IAAI,CAAC,CAAD,CAAR,EAAa;AACXE,MAAAA,OAAO,CAACC,GAAR,CAAYZ,GAAG,CAACE,IAAJ,CAASC,KAArB;;AACA,UAAIM,IAAI,CAAC,CAAD,CAAJ,CAAQI,gBAAR,CAAyBb,GAAG,CAACE,IAAJ,CAASM,QAAlC,CAAJ,EAAiD;AAC/CP,QAAAA,GAAG,CAACG,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBD,UAAAA,MAAM,EAAE,GADW;AAEnBU,UAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeP,IAAI,CAAC,CAAD,CAAnB,EAAwBX,YAAxB;AAFa,SAArB;AAID,OALD,MAKO;AACLG,QAAAA,GAAG,CAACG,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBD,UAAAA,MAAM,EAAE,GADW;AAEnBG,UAAAA,OAAO,EAAE;AAFU,SAArB;AAID;AACF,KAbD,MAaO;AACLN,MAAAA,GAAG,CAACG,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBD,QAAAA,MAAM,EAAE,GADW;AAEnBG,QAAAA,OAAO,EAAE;AAFU,OAArB;AAID;AACF;;AACD,SAAON,GAAP;AACD,C,CACD","sourcesContent":["/* eslint-disable linebreak-style */\r\nconst loanHelper = require('../helper/userHelper');\r\nconst replacerJson = require('../helper/indexH.js');\r\nimport {router} from '../routes/route';\r\n\r\nexport function login(req, res) {\r\n  if (!req.body.email) {\r\n    res.status(400).send({\r\n      success: 'false',\r\n      message: 'the email is required',\r\n    });\r\n  } else if (!req.body.password) {\r\n    res.status(400).send({\r\n      success: 'false',\r\n      message: 'the password is required',\r\n    });\r\n  } else {\r\n    const user = loanHelper.getSingleUser(req.body.email);\r\n    if (user[0]) {\r\n      console.log(req.body.email);\r\n      if (user[0].validatePassword(req.body.password)) {\r\n        res.status(200).send({\r\n          status: 200,\r\n          data: JSON.stringify(user[0], replacerJson),\r\n        });\r\n      } else {\r\n        res.status(403).send({\r\n          status: 400,\r\n          message: 'wrong email or password',\r\n        });\r\n      }\r\n    } else {\r\n      res.status(403).send({\r\n        status: 400,\r\n        message: 'wrong email or password',\r\n      });\r\n    }\r\n  }\r\n  return res;\r\n}\r\n// module.exports = login;\r\n"],"file":"login.js"}